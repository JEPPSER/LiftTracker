<ion-header>
	<ion-toolbar>
		<ion-buttons slot="start">
			<ion-back-button defaultHref=".."></ion-back-button>
		</ion-buttons>
		<ion-title>{{ exercise?.name }}</ion-title>
		<ion-buttons slot="end">
			<ion-button (click)="add()">
				<ion-icon slot="icon-only" name="add-outline"></ion-icon>
			</ion-button>
		</ion-buttons>
	</ion-toolbar>
</ion-header>
<ion-content>
	<ion-segment [value]="state" (ionChange)="state = $event.detail.value">
		<ion-segment-button value="workouts">Pass</ion-segment-button>
		<ion-segment-button value="stats">Statistik</ion-segment-button>
	</ion-segment>
	<ng-container *ngIf="state == 'workouts'">
		<workouts-list [workouts]="exercise.workouts" (onDeleteWorkout)="deleteWorkout($event)"></workouts-list>
	</ng-container>
	<ng-container *ngIf="state == 'stats'">
		<ion-item [disabled]="view == 'weeks'">
			<ion-select [value]="statProp" (ionChange)="statProp = $event.detail.value; updatePlot()">
				<ion-select-option value="volume">Volym</ion-select-option>
				<ion-select-option value="maxWeight">Maxvikt</ion-select-option>
				<ion-select-option value="maxReps">Maxreps</ion-select-option>
				<ion-select-option value="totalSets">Antal set</ion-select-option>
				<ion-select-option value="totalReps">Antal reps</ion-select-option>
			</ion-select>
		</ion-item>
		<ion-item lines="none">
			<ion-label>Linje</ion-label>
			<ion-toggle [checked]="drawLine" (ionChange)="drawLine = $event.detail.checked; plot.drawLine = drawLine; plot.draw()"></ion-toggle>
		</ion-item>
		<ion-item lines="none" [disabled]="view == 'weeks'">
			<ion-label>Datum avst√•nd</ion-label>
			<ion-toggle [checked]="propDates" (ionChange)="propDates = $event.detail.checked; plot.propDates = propDates; plot.draw()"></ion-toggle>
		</ion-item>
		<ion-segment *ngIf="statProp == 'volume'" [value]="view" (ionChange)="onViewChanged($event)">
			<ion-segment-button value="days">Dagar</ion-segment-button>
			<ion-segment-button value="weeks">Veckor</ion-segment-button>
		</ion-segment>
		<scatter-plot #Plot
			[view]="view"
			[data]="data"
			[drawLine]="drawLine"
			[propDates]="propDates">
		</scatter-plot>
	</ng-container>
</ion-content>
